## 使用AOP编程实现Cache框架

#### 一.实现spring增强器实现缓存切面
1. 设计缓存注解，查询缓存和更新缓存分开
```  ```
2. 使用拦截器拦截缓存注解
```  ```
3. 查询缓存切面优先级应该在事务切面优先级之前，以便缓存命中时不需要打开多余的事务。更新缓存切面优先级应该在事务切面之后，以保证数据一致性
```  ```
4. 首先解析方法注解和参数注解为元数据，并缓存元数据
```  ```
5. 将元数据交给对应的Handler执行，这里可以应用代理模式
```  ```
6. 在Handler中实现缓存，这里可以应用策略模式实现对不同redis api操作的支持，或实现二级缓存
```  ```
7. getObject方法返回代理类可以有2种实现，CGLIB或JDK动态代理
```  ```
#### 二.需要优化的地方
1. 过期时间可分级设置，可叠加随机时间
```  ```
2. 对缓存穿透、缓存击穿、缓存雪崩有控制手段
```  ```
3. 可限制缓存规模
```  ```
4. 缓存粒度可拆分
```  ```
5. 关联加载和关联清除
```  ```
